<!DOCTYPE html>
<html>

  <head>
    <meta charset='UTF-8'>
    <meta name="robots" content="noindex">
    <link rel='stylesheet' href='./style.css?nocache'>
    <link rel='stylesheet' href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'>
    <style type="text/css">
      /* initial css from parent app - setup to prevents FOUC while loading */
      .results-view { width: 720px; border: 1px solid #333; margin: 0 auto; }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="well well-sm text-center">
        <h2>
          Table Widget w/ Scrolling, Sorting, Magic
          <div class="small">Pure JavaScript - Framework Agnostic</div>
        </h2>
        <div class="btn-group">
          <div id='start' onclick="init()" class="btn btn-success">Init</div>
          <div id='destroy' onclick="powerTable.destroy()" class="btn btn-danger">Destroy</div>
        </div>
      </div>
      <div class="text-center">
        <div class="results-view" data-dojo-type="scramble/TableWidget">
          [loading...]
        </div>
      </div>
    </div>
    <script src='../dist/power-table.bundle.js?cache=not-now'></script>
    <script>
      var powerTable;
      const data = [
        { "_id": "552c3bc969702d5d488ba100", "number": "AL0400", "email": "dan@danlevy.net", "name": "AL04 Testing", "region": "Neverland", "type": "lead" },
        { "_id": "554021d769702d2b6d880101", "number": "AL0400", "email": "dan@danlevy.net", "name": "Allens 1", "region": "Neverland", "type": "lead" },
        { "_id": "5540221669702d2c12f80401", "number": "AL0400", "email": "dan@danlevy.net", "name": "Allens 2 test", "region": "Neverland", "type": "admin" },
        { "_id": "552eb5be69702d04d8ca2100", "number": "MM0000", "email": "mike@danlevy.net", "name": "Mike", "region": "Neverland", "type": "admin" },
        { "_id": "55f0b6ee69702d2e2c3c0600", "number": "danl00", "email": "dan@danlevy.net", "name": "login test", "region": "Neverland", "type": "admin" },
        { "_id": "560b5cb1fa29440373000563", "number": "ABC123", "email": "jj@danlevy.net", "name": "zzz abrams", "region": "Neverland", "type": "lead" },
        { "_id": "112c3bc969702d5d488ba100", "number": "AL0400", "email": "dan@danlevy.net", "name": "AL04 Testing", "region": "Neverland", "type": "lead" },
        { "_id": "114021d769702d2b6d880101", "number": "AL0400", "email": "dan@danlevy.net", "name": "Allens 1", "region": "Neverland", "type": "lead" },
        { "_id": "1140221669702d2c12f80401", "number": "AL0400", "email": "dan@danlevy.net", "name": "Allens 2 test", "region": "Neverland", "type": "lead" },
        { "_id": "112eb5be69702d04d8ca2100", "number": "MM0000", "email": "mike@danlevy.net", "name": "Mike", "region": "Neverland", "type": "lead" },
        { "_id": "11f0b6ee69702d2e2c3c0600", "number": "danl00", "email": "dan@danlevy.net", "name": "login test", "region": "Neverland", "type": "lead" },
        { "_id": "110b5cb1fa29440373000563", "number": "ABC123", "email": "jj@danlevy.net", "name": "jj abrams", "region": "Neverland", "type": "lead" },
        { "_id": "222c3bc969702d5d488ba100", "number": "AL0400", "email": "dan@danlevy.net", "name": "AL04 Testing", "region": "Neverland", "type": "lead" },
        { "_id": "224021d769702d2b6d880101", "number": "AL0400", "email": "dan@danlevy.net", "name": "Allens 1", "region": "Neverland", "type": "lead" },
        { "_id": "2240221669702d2c12f80401", "number": "AL0400", "email": "dan@danlevy.net", "name": "Allens 2 test", "region": "Neverland", "type": "lead" },
        { "_id": "222eb5be69702d04d8ca2100", "number": "MM0000", "email": "mike@danlevy.net", "name": "Mike", "region": "Neverland", "type": "lead" },
        { "_id": "22f0b6ee69702d2e2c3c0600", "number": "danl00", "email": "dan@danlevy.net", "name": "login test", "region": "Neverland", "type": "lead" },
        { "_id": "220b5cb1fa29440373000563", "number": "ABC123", "email": "jj@danlevy.net", "name": "zz abrams", "region": "Neverland", "type": "lead" },
        { "_id": "560b5cdffa29440373000564", "number": "123abc", "email": "jj@danlevy.net", "name": "jj test", "region": "Neverland", "type": "admin" }
      ]
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/dojo.js"
      data-dojo-config="mvc: {debugBindings: 0}, async: 1, tlmSiblingOfDojo: 0, isDebug: 1"></script>
    <script>
      require(["dojo/parser", "dijit/layout/BorderContainer", "dijit/layout/TabContainer", "dijit/layout/ContentPane", "dojo/domReady!"], function(parser){
        parser.parse();
      });
    </script>
    <script>
      define('scramble/TableWidget', [
        "dojo/_base/declare",
        "dijit/_LayoutBase",
        "dijit/_TemplatedMixin",
        // "dojo/text!./templates/SomeWidget.html"
      ], function(declare, _LayoutBase, _TemplatedMixin) {

        const config = {
          selection: true,
          sorting: true,
          defaultSort: 'name',
          columns: [
            {selection: true, multiple: true, toggleAll: true, classes: ['text-center', 'tbl-xs-2']},
            {title: 'Name',   render: 'name', cols: 4},
            {title: 'Number', render: 'number'},
            {title: 'Region', render: 'region'},
            {title: 'Type', sort: 'type', render: ({row}) => row.type && row.type.toLowerCase() || 'N/A'},
          ],
          data: Promise.resolve(data)
        };

        return declare([_LayoutBase, _TemplatedMixin], {
            templateString: `<div class="power-table-container" data-dojo-type="dijit/layout/BorderContainer"></div>`,
            postCreate: function() {
              this.inherited(arguments);
              this.powerTable = PowerTable.Table(this.domNode, config);
            },


        });

    });
    </script>

  </body>

</html>


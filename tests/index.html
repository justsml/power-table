<!DOCTYPE html>
<html>

  <head>
    <meta charset='UTF-8'>
    <meta name="robots" content="noindex">
    <link rel='stylesheet' href='./style.css?nocache'>
    <link rel='stylesheet' href='//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css'>
    <style type="text/css">
      /* initial css from parent app - setup to prevents FOUC while loading */
      .results-view { width: 720px; border: 1px solid #333; margin: 0 auto; }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="well well-sm text-center">
        <h2>
          Table Widget w/ Scrolling, Sorting, Magic
          <div class="small">Pure JavaScript - Framework Agnostic</div>
        </h2>
        <div class="btn-group">
          <div id='start' onclick="init()" class="btn btn-success">Init</div>
          <div id='destroy' onclick="powerTable.destroy()" class="btn btn-danger">Destroy</div>
        </div>
      </div>
      <div class="text-center">
        <div class="results-view">
          [loading...]
        </div>
      </div>
    </div>
    <script src='../dist/power-table.bundle.js?cache=not-now'></script>
    <script>
      const data = [
        { "_id": "552c3bc969702d5d488ba100", "customer_number": "AL0400", "email": "dan@danlevy.net", "name": "AL04 Testing", "region": null, "type": "lead" },
        { "_id": "554021d769702d2b6d880101", "customer_number": "AL0400", "email": "dan@danlevy.net", "name": "Allens 1", "region": null, "type": "lead" },
        { "_id": "5540221669702d2c12f80401", "customer_number": "AL0400", "email": "dan@danlevy.net", "name": "Allens 2 test", "region": null, "type": "lead" },
        { "_id": "552eb5be69702d04d8ca2100", "customer_number": "MM0000", "email": "mike@danlevy.net", "name": "Mike", "region": null, "type": "lead" },
        { "_id": "55f0b6ee69702d2e2c3c0600", "customer_number": "danl00", "email": "dan@danlevy.net", "name": "login test", "region": null, "type": "lead" },
        { "_id": "560b5cb1fa29440373000563", "customer_number": "ABC123", "email": "jj@danlevy.net", "name": "jj abrams", "region": null, "type": "lead" },
        { "_id": "560b5cdffa29440373000564", "customer_number": "123abc", "email": "jj@danlevy.net", "name": "jj test", "region": null, "type": "admin" }
      ]

      var config = {
        columns: [
          {selection: true, multiple: true, toggleAll: true},
          {title: 'Name', render: 'name'},
          {title: 'Number', render: 'customer_number'},
          {title: 'Region', render: 'region'},
          {title: 'Type', sort: 'type', render: (rec) => rec.type && rec.type.toUpperCase() },
        ],
        data: Promise.resolve(data)
      };
      var powerTable;
      function init() {
        powerTable = PowerTable.Table(document.querySelector('.results-view'), config)
      }
      setTimeout(init, 250)
    </script>
  </body>

</html>

